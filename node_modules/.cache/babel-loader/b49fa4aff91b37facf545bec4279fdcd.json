{"ast":null,"code":"var _jsxFileName = \"/Users/newsilver/Project/react-study-7-weeks/src/Components/Foods.tsx\",\n    _s = $RefreshSig$();\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { cartReducer } from '../Reducers/cartReducer';\nimport Food from './Food';\nimport { discountReducer } from '../Reducers/discountReducer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Foods(props) {\n  _s();\n\n  const dispatch = useDispatch();\n  const foodsList = props.foodsList;\n  const {\n    cartData\n  } = useSelector(store => store.cartReducer);\n  const {\n    foodData\n  } = useSelector(store => store.cartReducer);\n  const storedFoods = cartData.storedFoods;\n\n  const onAdd = target => {\n    dispatch(cartReducer.actions.ADD(target)); // dispatch(discountReducer.actions.UPDATE(storedFoods));\n  };\n\n  const onUpdate = storedFoods => {\n    dispatch(discountReducer.actions.STORE(foodData.discounts));\n    dispatch(discountReducer.actions.UPDATE(storedFoods));\n  };\n\n  function addCartClickHandler(event) {\n    const target = event.target.id;\n    const isOverlapped = storedFoods.filter(item => item.name === target).length !== 0;\n\n    if (isOverlapped) {\n      alert(\"이미 장바구니에 등록된 상품입니다.\");\n      return;\n    }\n\n    onAdd(target);\n    onUpdate(storedFoods);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: foodsList.map(food => {\n      const {\n        name,\n        price,\n        ..._\n      } = food; // const name = food.name;\n      // const price = food.price; // 1000단위 마다 ,를 붙여야 함\n\n      return /*#__PURE__*/_jsxDEV(Food, {\n        name: name,\n        price: price,\n        onAdd: addCartClickHandler\n      }, name, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 16\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Foods, \"r/GkAtYb3MwtNSHI3qzCoSMkLZM=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = Foods;\n\nvar _c;\n\n$RefreshReg$(_c, \"Foods\");","map":{"version":3,"sources":["/Users/newsilver/Project/react-study-7-weeks/src/Components/Foods.tsx"],"names":["useSelector","useDispatch","cartReducer","Food","discountReducer","Foods","props","dispatch","foodsList","cartData","store","foodData","storedFoods","onAdd","target","actions","ADD","onUpdate","STORE","discounts","UPDATE","addCartClickHandler","event","id","isOverlapped","filter","item","name","length","alert","map","food","price","_"],"mappings":";;;AAAA,SAASA,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAGA,SAASC,WAAT,QAAyC,yBAAzC;AAGA,OAAOC,IAAP,MAAiB,QAAjB;AACA,SAASC,eAAT,QAAgC,6BAAhC;;AAEA,eAAe,SAASC,KAAT,CAAeC,KAAf,EAA6C;AAAA;;AAC1D,QAAMC,QAAQ,GAAGN,WAAW,EAA5B;AACA,QAAMO,SAAS,GAAGF,KAAK,CAACE,SAAxB;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAeT,WAAW,CAAEU,KAAD,IAAsBA,KAAK,CAACR,WAA7B,CAAhC;AACA,QAAM;AAAES,IAAAA;AAAF,MAAeX,WAAW,CAAEU,KAAD,IAAsBA,KAAK,CAACR,WAA7B,CAAhC;AACA,QAAMU,WAAW,GAAGH,QAAQ,CAACG,WAA7B;;AAEA,QAAMC,KAAK,GAAIC,MAAD,IAAoB;AAChCP,IAAAA,QAAQ,CAACL,WAAW,CAACa,OAAZ,CAAoBC,GAApB,CAAwBF,MAAxB,CAAD,CAAR,CADgC,CAEhC;AACD,GAHD;;AAKA,QAAMG,QAAQ,GAAIL,WAAD,IAAgC;AAC/CL,IAAAA,QAAQ,CAACH,eAAe,CAACW,OAAhB,CAAwBG,KAAxB,CAA8BP,QAAQ,CAACQ,SAAvC,CAAD,CAAR;AACAZ,IAAAA,QAAQ,CAACH,eAAe,CAACW,OAAhB,CAAwBK,MAAxB,CAA+BR,WAA/B,CAAD,CAAR;AACD,GAHD;;AAKA,WAASS,mBAAT,CAA6BC,KAA7B,EAAmF;AACjF,UAAMR,MAAM,GAAGQ,KAAK,CAACR,MAAN,CAAaS,EAA5B;AACA,UAAMC,YAAY,GAAGZ,WAAW,CAACa,MAAZ,CAAoBC,IAAD,IAAiBA,IAAI,CAACC,IAAL,KAAcb,MAAlD,EAA0Dc,MAA1D,KAAqE,CAA1F;;AACA,QAAIJ,YAAJ,EAAkB;AAChBK,MAAAA,KAAK,CAAC,qBAAD,CAAL;AACA;AACD;;AACDhB,IAAAA,KAAK,CAACC,MAAD,CAAL;AACAG,IAAAA,QAAQ,CAACL,WAAD,CAAR;AACD;;AAED,sBACE;AAAA,cACGJ,SAAS,CAACsB,GAAV,CAAeC,IAAD,IAA0C;AACvD,YAAM;AAACJ,QAAAA,IAAD;AAAOK,QAAAA,KAAP;AAAc,WAAGC;AAAjB,UAAsBF,IAA5B,CADuD,CAEvD;AACA;;AACA,0BAAO,QAAC,IAAD;AAAiB,QAAA,IAAI,EAAEJ,IAAvB;AAA6B,QAAA,KAAK,EAAEK,KAApC;AAA2C,QAAA,KAAK,EAAEX;AAAlD,SAAWM,IAAX;AAAA;AAAA;AAAA;AAAA,cAAP;AACD,KALA;AADH;AAAA;AAAA;AAAA;AAAA,UADF;AAUD;;GAtCuBtB,K;UACLJ,W,EAEID,W,EACAA,W;;;KAJCK,K","sourcesContent":["import { useSelector, useDispatch } from 'react-redux';\nimport { ReactElement } from 'react';\n\nimport { cartReducer, StoredFoods } from '../Reducers/cartReducer';\nimport { RootState } from '../Reducers';\nimport { Data, FoodData, Discounts, Items, initialState } from '../Reducers/cartReducer';\nimport Food from './Food';\nimport { discountReducer } from '../Reducers/discountReducer';\n\nexport default function Foods(props: { foodsList: Items[]}) {\n  const dispatch = useDispatch();\n  const foodsList = props.foodsList;\n  const { cartData } = useSelector((store: RootState) => store.cartReducer);\n  const { foodData } = useSelector((store: RootState) => store.cartReducer);\n  const storedFoods = cartData.storedFoods;\n\n  const onAdd = (target: string) => {\n    dispatch(cartReducer.actions.ADD(target));\n    // dispatch(discountReducer.actions.UPDATE(storedFoods));\n  } \n\n  const onUpdate = (storedFoods: StoredFoods[]) => {\n    dispatch(discountReducer.actions.STORE(foodData.discounts));\n    dispatch(discountReducer.actions.UPDATE(storedFoods));\n  }\n\n  function addCartClickHandler(event: React.MouseEventHandler<HTMLDivElement>): void {\n    const target = event.target.id;\n    const isOverlapped = storedFoods.filter((item: Items) => item.name === target).length !== 0;\n    if (isOverlapped) {\n      alert(\"이미 장바구니에 등록된 상품입니다.\");\n      return;\n    }\n    onAdd(target);\n    onUpdate(storedFoods);\n  }\n  \n  return (\n    <div>\n      {foodsList.map((food: Items): ReactElement<FoodProps> => {\n        const {name, price, ..._} = food;\n        // const name = food.name;\n        // const price = food.price; // 1000단위 마다 ,를 붙여야 함\n        return <Food key={name} name={name} price={price} onAdd={addCartClickHandler} />\n      })}\n    </div>\n  )\n}\n\nexport interface FoodProps {\n  name: string;\n  price: number;\n  onAdd: React.MouseEventHandler<HTMLDivElement>;\n}\n\n"]},"metadata":{},"sourceType":"module"}